<ui:composition template="../layouts/layoutInterior2.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:pe="http://primefaces.org/ui/extensions"
	xmlns:fn="http://java.sun.com/jsp/jstl/functions">

		<ui:define name="title">Ecologistii</ui:define>
		<ui:define name="content">	
			<h:form id="formHome">
				<h3>STATISTICĂ</h3>	  
		    <p:outputPanel layout="block" id="panelDatos">
		    <p:tabView>
		        <p:ajax event="tabChange" listener="#{statisticaBean.cambioTipStatistica}" update="formHome:panelDatos" onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" />
		        <p:tab title="ORGANIZAŢII JUDEŢENE" id="membrii_organizatii">
		        
		        <h:panelGrid >
					<p:outputPanel>	           		            															
					<div class="filtro2">
					<h:panelGrid columns="2" columnClasses="left,right" style="width:100%">
					    <p:chart type="bar" model="#{statisticaBean.totalMembriiModel}" style="width:400px;" />
					</h:panelGrid>
					<h:panelGrid columns="2" columnClasses="left,right" style="width:100%">
					<p:chart type="pie" model="#{statisticaBean.pieModel}" style="width:400px;height:300px" />
					</h:panelGrid>
					</div>
					
					<div class="resultadosFiltro2">
					<p:outputPanel layout="block" id="panelStatistica">
					<p:dataTable var="judet"
						value="#{statisticaBean.listaJudete}" rows="10" styleClass="modHeaderTable"
						paginatorTemplate="{FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}" pageLinks="4" 
						paginatorPosition="bottom" id="tablaJudete" paginator="true" resizableColumns="true"
						lazy="true" rowsPerPageTemplate="10,25,50" rowIndexVar="rowIndex"
						emptyMessage="Nu există niciun rezultat care să corespundă parametrilor căutării dvs." paginatorAlwaysVisible="false">
						<f:facet name="header">
							<p:outputPanel>
								<span class="titulo">ORGANIZAŢII JUDEŢENE #{statisticaBean.luna}</span>
								<p:commandButton id="toggler" type="button" value="Coloane"
									class="botonColumnas" icon="fa fa-th"/>
								<p:columnToggler datasource="tablaJudete" trigger="toggler">
									<p:ajax event="toggle" listener="#{statisticaBean.onToggle}" />
								</p:columnToggler>
							</p:outputPanel>
						</f:facet>
						<p:column headerText="Nume" style="width:15%;"
							sortBy="#{judet.nume}" >
							<b><h:outputText value="#{judet.nume}" /></b>
						</p:column>				
						<p:column headerText="Populație totală" style="width:20%;"
							sortBy="#{judet.populatieTotala}">
							<h:outputText value="#{judet.populatieTotala}" />
						</p:column>

						<p:column headerText="Populație cu drept de vot" style="width:20%;"
							sortBy="#{judet.populatieVot}">
							<h:outputText value="#{judet.populatieVot}" />
						</p:column>	
						
						<p:column headerText="Procentaj" style="width:15%;"
							sortBy="#{judet.procentaj}" >
							<h:outputText value="#{judet.procentaj}" />%
						</p:column>		
									
						<p:column headerText=" Situație" style="width:25%;" styleClass="text-center"
							sortBy="#{judet.valoare}">
							<h:outputText styleClass="fa fa-plus-circle" value=" EXCELENT"
								rendered="#{judet.valoare eq 'EXCELENT'}" />
							<h:outputText styleClass="fa fa-check-circle" value=" BUN"
								rendered="#{judet.valoare eq 'BUN'}" />
							<h:outputText styleClass="a fa-warning modColor" value=" ACCEPTABIL"
								rendered="#{judet.valoare eq 'ACCEPTABIL'}" />
							<h:outputText styleClass="fa fa-minus-circle" value=" INACCEPTABIL"
								rendered="#{judet.valoare eq 'NECONVINGATOR'}" />										
						</p:column>
						<p:column headerText="" styleClass="botonTabla text-center"
							exportable="false" style="width:8%;" toggleable="false">
							<p:commandButton title="Vedeți datele detaliate" icon="fa fa-fw fa-eye"
								action="#{statisticaBean.verDetalleJudet(judet)}" 
								onstart="PF('statusDialog').show()"
								onsuccess="PF('statusDialog').hide()" styleClass="modBtn"
							/>				
						</p:column>
						<f:facet name="footer">
       				 Total: 
						<h:outputText value="#{statisticaBean.rowCount}">
	    						<f:convertNumber type="number"
                                 maxIntegerDigits="9"
                                 maxFractionDigits="0"/>
							</h:outputText>
       				 membrii
    			</f:facet>
					</p:dataTable>
				</p:outputPanel>
					</div>
					</p:outputPanel>
				</h:panelGrid>		    
		       </p:tab>
		    </p:tabView>
		    </p:outputPanel>
		</h:form>		
		</ui:define>
	</ui:composition>
